# Hsah

区块链中，区块之间通过哈希值链接，哈希值是一种单向函数，输入一个值，输出一个固定长度的字符串。

## 哈希函数的定义

哈希函数 H(x) 是一个从输入 x 到输出 y 的单向函数，满足以下性质：

1. 单向性：H(x) 存在且唯一，对于任意 x 和 y，有 H(x) = H(y) 或者 H(x) != H(y)。
2. 一致性：对任意 x 和 y，有 H(x) = H(y)，当且仅当 x = y。
3. 无碰撞性：对于任意 x 和 y，有 H(x) != H(y)，当且仅当 x != y。

## 哈希函数的作用

哈希函数的作用是将任意长度的数据转换为固定长度的字符串，使得相同的数据得到相同的输出，且输出结果不可逆。

- 信息认证：对数据进行哈希运算，得到的结果可以作为唯一标识，用于信息的认证。
- 数据存储：对数据进行哈希运算，得到的结果作为数据的唯一标识，用于数据的存储。
- 数据完整性：对数据进行哈希运算，得到的结果作为数据的唯一标识，用于数据完整性的验证。
- 数据分发：对数据进行哈希运算，得到的结果作为数据的唯一标识，用于数据分发。
- 数据加密：对数据进行哈希运算，得到的结果作为密钥，用于数据的加密。

<!--
密码学中，采用的哈希函数称为名**cryptographic hash function。**其两个重要性质分别为**collision resistance**（对哈希碰撞具有抗拒性）和**hiding(隐藏性)**

## collision resistence

给定 x 和 y，且有 x!=y，但给定一个哈希函数 Hash()，可以得到 Hash(x)=Hash(y)，则称为**hash 碰撞。**
产生原因：输入空间大于输出空间。
比如 256 位的哈希值，输出空间 2^256，输入空间无限 ，根据鸽笼原理，终究会有哈希碰撞。
collision resistance 保证,如果有 Hash(x) != Hash(y)，必然可以得到 x!=y。（当然，这是理想状态，实际应用中，哈希碰撞基本上难以避免。目前并不存在一个 hash 函数可以从数学上证明具有 collision resistance 的性质）

- 作用：
  - 对 message 求 digest （比如版本管理）。
  - 此时告诉某人 H(x)， 彼时某人拿到 x 求证，可验证当初 x 消息是否准确。

某些哈希函数经年后，人们找到了人为制作哈希碰撞的方法，故不再安全。 如 md5。

## hiding

无法从散列值逆向推导出原始数据。

## collision resistance 和 hiding 结合实现 digital commitment / digital equivallent of a sealed envelope(数据保证)：

实际使用中，为了 x 足够大，会对 x 进行“加盐”，对 x 拼接一个 nonce，对其整体取 Hash。
即： ** x + nonce => H(x & nonce) **

## puzzle friendly

在在比特币系统中，还需要第三个性质 Puzzle friendly。该性质要求哈希值计算事先不可预测，仅仅根据输入很难预测出输出。例如：我们需要一个哈希值，存在于某一个范围内，只能通过不停运算查找出来。
该性质保证了比特币系统中，只能通过“挖矿”获得比特币。也就是说，该性质保证了工作量证明(POW)机制可以运行下去【“difficult to solve，but easy to verify”】。
在比特币系统中采用 SHA-256 哈希函数 -->
