# JavaScript 代码规范

JavaScript 代码规范旨在提高代码的可读性、可维护性和一致性。通过遵循统一的规范，团队可以避免不必要的错误，并让代码更易于理解和维护。以下是一些常见的 JavaScript 代码规范，涵盖了变量命名、缩进、注释、函数、对象等方面。

## 1. 变量命名规范

### 使用有意义的、描述性的变量名

- 变量名应能够反映其用途。避免使用没有意义的单字母或缩写（如 `x`、`y`、`temp`）。

```javascript
// Bad
let x = 10

// Good
let userCount = 10
```

### 使用驼峰命名法（CamelCase）

- JavaScript 中常用的命名法是驼峰命名法，首字母小写，后面每个单词的首字母大写。

```javascript
// Bad
let user_name = 'John'

// Good
let userName = 'John'
```

### 常量使用全大写命名

- 对于不可变的常量，使用全大写字母并用下划线分隔。

```javascript
// Good
const MAX_USERS = 100
```

## 2. 代码缩进

- 使用 **2** 或 **4** 个空格来缩进代码。不要使用 tab 键混合缩进。

```javascript
// Good
function sum(a, b) {
  return a + b
}
```

## 3. 语句结束使用分号

- JavaScript 中分号是可选的，但为了避免自动插入分号机制（ASI，Automatic Semicolon Insertion）引发的问题，建议始终在语句末尾加分号。

```javascript
// Good
let userName = 'Alice'
```

## 4. 代码长度

- 每行代码不应超过 80-100 个字符，确保代码易于阅读和维护。可以通过换行来保持行长度限制。

```javascript
// Good
const isUserEligibleForDiscount =
  user.age > 18 && user.membershipStatus === 'active' && user.purchaseHistory.length > 10
```

## 5. 函数

### 函数命名

- 函数名应以动词开头，表明函数的作用。

```javascript
// Good
function getUserInfo() {
  // ...
}

function setUserName(name) {
  // ...
}
```

### 使用箭头函数（在适当场景）

- 在不需要 `this` 关键字的场景下，使用箭头函数可以提高代码的简洁性。

```javascript
// Good
const sum = (a, b) => a + b
```

### 函数参数的合理控制

- 函数的参数尽量保持在 3 个以内，超出时可以考虑传入对象。

```javascript
// Good
function createUser({ name, age, email }) {
  // ...
}
```

## 6. 对象与数组

### 对象属性使用简写

- 在 ES6 中，当属性名与变量名相同时，可以使用对象简写语法。

```javascript
// Good
const name = 'Alice'
const user = { name } // 相当于 { name: name }
```

### 对象和数组的解构赋值

- 使用解构可以提高代码的可读性，避免反复访问对象或数组属性。

```javascript
// Good
const user = { name: 'Alice', age: 25 }
const { name, age } = user
```

### 数组使用扩展运算符

- 使用扩展运算符代替 `concat` 或 `push` 等方法来合并数组或创建新数组。

```javascript
// Good
const arr1 = [1, 2]
const arr2 = [3, 4]
const combined = [...arr1, ...arr2]
```

## 7. 条件判断

### 使用严格相等（`===` 和 `!==`）

- 严格相等检查避免了类型转换带来的潜在问题。

```javascript
// Bad
if (x == 0) {
  // Do something
}

// Good
if (x === 0) {
  // Do something
}
```

### 短路评估

- 在逻辑判断中使用短路评估来减少代码的冗余。

```javascript
// Good
const isValid = user && user.isActive
```

### 使用三元运算符进行简单的条件赋值

- 对于简单的条件操作，使用三元运算符代替 `if-else` 语句。

```javascript
// Good
const userStatus = isLoggedIn ? 'Logged In' : 'Guest'
```

## 8. 注释

### 使用单行注释和多行注释

- **单行注释**：对于简单的说明或标注，使用 `//`。
- **多行注释**：对于较为复杂的逻辑或需要详细解释的代码块，使用 `/* */`。

```javascript
// This is a single line comment

/*
  This is a multi-line comment.
  It explains the following block of code.
*/
function calculateTax(income) {
  // Tax calculation logic
}
```

### 避免无意义的注释

- 注释应该解释“为什么”做某件事，而不是“是什么”或“怎么做”。不要写与代码功能重复的注释。

```javascript
// Bad
// This is a function to get the user name
function getUserName() {
  //...
}

// Good
// Fetches the user name from the database if user is logged in
function getUserName() {
  //...
}
```

## 9. 常见最佳实践

### 避免魔法数字

- 魔法数字指的是在代码中直接使用的数字，而没有上下文解释其意义。应将其定义为常量，并给予有意义的名称。

```javascript
// Bad
if (score > 60) {
  // Pass
}

// Good
const PASSING_SCORE = 60
if (score > PASSING_SCORE) {
  // Pass
}
```

### 避免全局变量

- 尽量避免在全局作用域中声明变量，防止与其他脚本冲突。

### 使用模板字符串

- 使用 ES6 的模板字符串（反引号 ``）可以避免复杂的字符串拼接，并且可以插入变量和表达式。

```javascript
// Good
const message = `Hello, ${userName}. You have ${messages.length} new messages.`
```

### 提前返回减少嵌套

- 函数中使用“提前返回”来减少嵌套和复杂度。

```javascript
// Bad
function processUser(user) {
  if (user) {
    if (user.isActive) {
      // Do something
    }
  }
}

// Good
function processUser(user) {
  if (!user || !user.isActive) return
  // Do something
}
```

## 10. 工具与格式化

### 使用 `ESLint`

- 使用 `ESLint` 等工具来自动检查代码中的潜在错误和风格问题。可以结合规则如 `Airbnb`、`Google` 或自定义规则进行代码校验。

### 使用 `Prettier` 自动格式化

- 配合 `Prettier` 等代码格式化工具，保持代码风格的一致性。它可以自动处理代码缩进、换行、空格等格式化问题。

## 11. 避免使用 `var`

- 自 ES6 起，建议使用 `let` 和 `const` 代替 `var`。`let` 有块级作用域，`const` 表示常量，避免了 `var` 的提升（hoisting）问题。

```javascript
// Good
let count = 10
const MAX_COUNT = 100
```
